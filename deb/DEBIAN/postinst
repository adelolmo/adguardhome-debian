#!/bin/sh -e

case "$1" in
    configure|reconfigure)
        mkdir -p /etc/opt/adguardhome
        mkdir -p /var/opt/adguardhome
        mkdir -p /var/log/adguardhome

        ucf /opt/adguardhome/configuration /etc/opt/adguardhome/AdGuardHome.yaml
        ucfr adguardhome /etc/opt/adguardhome/AdGuardHome.yaml

        systemctl daemon-reload
        systemctl enable adguardhome
        systemctl restart adguardhome
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac
